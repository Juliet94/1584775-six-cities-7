{"version":3,"sources":["const.js","components/app/offers.prop.js","store/action.js","store/offers/offers.js","store/user/user.js","store/data/data.js","store/root-reducer.js","store/user/selectors.js","store/adapter.js","store/api-actions.js","components/favorites-button/favorites-button.jsx","utils/place-card.js","components/place-card/place-card.jsx","components/place-card-list/place-card-list.jsx","components/logo/logo.jsx","components/auth-user/auth-user.jsx","components/no-auth-user/no-auth-user.jsx","components/header/header.jsx","components/main-empty/main-empty.jsx","store/data/selectors.js","store/offers/selectors.js","components/cities-list/cities-list.jsx","hooks/useMap.js","components/map/map.jsx","components/sort-form/sort-form.jsx","utils/sort.js","components/pages/main-page/main-page.jsx","components/review-rating-stars/review-rating-stars.jsx","components/review-form/review-form.jsx","components/app/reviews.prop.js","components/review-item/review-item.jsx","components/review-list/review-list.jsx","components/loading-screen/loading-screen.jsx","components/pages/not-found-page/not-found-page.jsx","components/pages/offer-page/offer-page.jsx","components/favotites-list-item/favorites-list-item.jsx","components/favorites-list/favorites-list.jsx","components/footer/footer.jsx","components/favorites-empty/favorites-empty.jsx","components/pages/favorites-page/favorites-page.jsx","components/pages/login-page/login-page.jsx","components/private-route/private-route.jsx","components/app/app.jsx","services/api.js","index.js"],"names":["AppRoute","PropTypes","shape","bedrooms","number","isRequired","city","location","latitude","longitude","zoom","name","string","description","goods","arrayOf","host","avatarUrl","id","isPro","bool","images","isFavorite","isPremium","maxAdults","previewImage","price","rating","title","type","placeCardPageType","main","classListElement","classListElementWrapper","cardImageWidth","cardImageHeight","offer","favorite","classInfo","placeCardButtonType","card","class","width","height","Colors","CITIES","SortType","POPULAR","PRICE_LOW","PRICE_HIGH","TOP_RATED","APIRoute","AuthorizationStatus","AUTH","NO_AUTH","UNKNOWN","DEFAULT_CITY","ActionType","changeCity","createAction","payload","fillOffersList","changeSort","sort","changeActiveCard","loadOffers","offers","loadNearbyOffers","loadOffer","loadReviews","reviews","loadFavorites","favorites","updateFavorites","setIsOfferDataLoaded","value","setIsDataLoadError","setIsReviewSending","requireAuthorization","status","logout","getUserData","userData","initialState","activeCityName","activeSortType","activePlaceCard","createReducer","builder","addCase","state","action","authorizationStatus","user","data","allOffers","nearbyOffers","favoritesOffers","isDataLoaded","isOfferDataLoaded","isDataLoadError","isReviewSending","filter","find","item","index","findIndex","splice","Object","keys","length","some","NameSpace","combineReducers","getAuthorizationStatus","adaptOfferToClient","adaptedOffer","adaptReviewToClient","review","adaptedReview","avatar_url","is_pro","fetchFavorites","dispatch","_getState","api","get","then","map","login","email","password","post","localStorage","setItem","token","adaptedUser","adaptUserToClient","FavoritesButton","buttonType","useDispatch","auth","useSelector","history","useHistory","className","onClick","catch","postFavorite","push","style","stroke","fill","xlinkHref","getPlaceRatingPercent","toFixed","PlaceCard","pageType","setActivePlaceCard","placeRating","onMouseEnter","onMouseLeave","to","pathname","generatePath","src","alt","PlaceCardList","useState","Logo","activeClassName","isActive","match","AuthUser","delete","removeItem","closeSession","NoAuthUser","href","Header","MainEmpty","getOffers","getNearbyOffers","getOffer","getReviews","getFavorites","getIsDataLoaded","getIsOfferDataLoaded","getIsDataLoadError","getIsReviewSending","getActiveCityName","getActiveSortType","getActivePlaceCard","getActiveCity","createSelector","CitiesList","itemCity","useMap","containerRef","setMap","useEffect","current","instance","leaflet","center","lat","lng","tileLayer","attribution","addTo","ICON_SIZE","Map","mapContainerRef","useRef","defaultIcon","icon","iconUrl","iconSize","iconAnchor","activeIcon","markers","layerGroup","forEach","marker","flyTo","clearLayers","ref","sorts","values","SortForm","sortType","sortIsOpen","setSortIsOpen","toggleSort","method","tabIndex","sortOffers","slice","a","b","MainPage","cityName","RATINGS","ReviewRatingStars","handleRatingChange","rateChecked","onChange","rate","Fragment","checked","htmlFor","ReviewLength","ReviewForm","text","userReview","setUserReview","onSubmit","evt","preventDefault","comment","postReview","target","placeholder","minLength","maxLength","disabled","date","ReviewItem","reviewRating","reviewDate","Date","toLocaleDateString","year","month","dateTime","ReviewList","LoadingScreen","margin","animation","zIndex","cx","cy","r","strokeWidth","strokeLinecap","NotFoundPage","OfferPage","offerId","useLocation","replace","fetchOffer","fetchNearbyOffersList","fetchReviewsList","image","property","concat","FavoritesListItem","favoriteOffers","favoriteCity","FavoritesList","favoritesUniqueCities","favoriteCities","Array","from","Footer","FavoritesEmpty","FavoritesPage","Set","add","LoginPage","setPassword","emailRef","required","trim","PrivateRoute","render","path","exact","routeProps","App","HttpCode","getItem","onUnauthorized","axios","create","baseURL","timeout","headers","interceptors","response","use","err","request","createAPI","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","thunk","extraArgument","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6f6856a3.chunk.js","sourcesContent":["export const AppRoute = {\n  MAIN: '/',\n  LOGIN: '/login',\n  FAVORITES: '/favorites',\n  OFFER: '/offer/:id',\n};\n\nexport const placeCardPageType = {\n  main: {\n    type: 'main',\n    classListElement: 'cities__place-card place-card',\n    classListElementWrapper: 'cities__image-wrapper',\n    cardImageWidth: 260,\n    cardImageHeight: 200,\n  },\n  offer: {\n    type: 'offer',\n    classListElement: 'near-places__card place-card',\n    classListElementWrapper: 'near-places__image-wrapper',\n    cardImageWidth: 260,\n    cardImageHeight: 200,\n  },\n  favorite: {\n    type: 'favorite',\n    classListElement: 'favorites__card',\n    classListElementWrapper: 'favorites__image-wrapper',\n    classInfo: 'favorites__card-info',\n    cardImageWidth: 150,\n    cardImageHeight: 110,\n  },\n};\n\nexport const placeCardButtonType = {\n  card: {\n    class: 'place-card__bookmark-button button',\n    width: 18,\n    height: 19,\n  },\n  offer: {\n    class: 'property__bookmark-button button',\n    width: 31,\n    height: 33,\n  },\n};\n\nexport const Colors = {\n  FAVORITE_CHECKED: '#4481c3',\n  FAVORITE_NOT_CHECKED: '#979797',\n};\n\nexport const CITIES = ['Paris', 'Cologne', 'Brussels', 'Amsterdam', 'Hamburg', 'Dusseldorf'];\n\nexport const SortType = {\n  POPULAR: 'Popular',\n  PRICE_LOW: 'Price: low to high',\n  PRICE_HIGH: 'Price: high to low',\n  TOP_RATED: 'Top rated first',\n};\n\nexport const APIRoute = {\n  OFFERS: '/hotels',\n  NEARBY_OFFERS: '/nearby',\n  REVIEWS: '/comments',\n  FAVORITE: '/favorite',\n  LOGIN: '/login',\n  LOGOUT: '/logout',\n};\n\nexport const AuthorizationStatus = {\n  AUTH: 'AUTH',\n  NO_AUTH: 'NO_AUTH',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const DEFAULT_CITY = 'Paris';\n","import PropTypes from 'prop-types';\n\nexport default PropTypes.shape({\n  bedrooms: PropTypes.number.isRequired,\n  city: PropTypes.shape({\n    location: PropTypes.shape({\n      latitude: PropTypes.number.isRequired,\n      longitude: PropTypes.number.isRequired,\n      zoom: PropTypes.number.isRequired,\n    }).isRequired,\n    name: PropTypes.string.isRequired,\n  }).isRequired,\n  description: PropTypes.string.isRequired,\n  goods: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  host: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    id: PropTypes.number.isRequired,\n    isPro: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n  }).isRequired,\n  id: PropTypes.number.isRequired,\n  images: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  isFavorite: PropTypes.bool.isRequired,\n  isPremium: PropTypes.bool.isRequired,\n  location: PropTypes.shape({\n    latitude: PropTypes.number.isRequired,\n    longitude: PropTypes.number.isRequired,\n    zoom: PropTypes.number.isRequired,\n  }).isRequired,\n  maxAdults: PropTypes.number.isRequired,\n  previewImage: PropTypes.string.isRequired,\n  price: PropTypes.number.isRequired,\n  rating: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n}).isRequired;\n","import {createAction} from '@reduxjs/toolkit';\n\nexport const ActionType = {\n  CHANGE_CITY: 'offers/changeCity',\n  CHANGE_SORT: 'offers/changeSort',\n  CHANGE_ACTIVE_CARD: 'offers/changeActiveCard',\n  FILL_OFFERS_LIST: 'data/fillOffersList',\n  LOAD_OFFERS: 'data/loadOffers',\n  LOAD_NEARBY_OFFERS: 'data/loadNearbyOffers',\n  LOAD_OFFER: 'data/loadOffer',\n  LOAD_REVIEWS: 'data/loadReviews',\n  LOAD_FAVORITES: 'data/loadFavorites',\n  UPDATE_FAVORITES: 'data/updateFavorites',\n  SET_IS_DATA_LOAD_ERROR: 'data/setIsDataLoadError',\n  SET_IS_OFFER_DATA_LOADED: 'data/setIsOfferDataLoaded',\n  SET_IS_REVIEW_SENDING: 'data/setIsReviewSending',\n  REQUIRED_AUTHORIZATION: 'user/requiredAuthorization',\n  LOGOUT: 'user/logout',\n  GET_USER_DATA: 'user/getUserData',\n};\n\nexport const changeCity = createAction(ActionType.CHANGE_CITY, (city) => ({\n  payload: city,\n}));\n\nexport const fillOffersList = createAction(ActionType.FILL_OFFERS_LIST, (city) => ({\n  payload: city,\n}));\n\nexport const changeSort = createAction(ActionType.CHANGE_SORT, (sort) => ({\n  payload: sort,\n}));\n\nexport const changeActiveCard = createAction(ActionType.CHANGE_ACTIVE_CARD, (card) => ({\n  payload: card,\n}));\n\nexport const loadOffers = createAction(ActionType.LOAD_OFFERS, (offers) => ({\n  payload: offers,\n}));\n\nexport const loadNearbyOffers = createAction(ActionType.LOAD_NEARBY_OFFERS, (offers) => ({\n  payload: offers,\n}));\n\nexport const loadOffer = createAction(ActionType.LOAD_OFFER, (offer) => ({\n  payload: offer,\n}));\n\nexport const loadReviews = createAction(ActionType.LOAD_REVIEWS, (reviews) => ({\n  payload: reviews,\n}));\n\nexport const loadFavorites = createAction(ActionType.LOAD_FAVORITES, (favorites) => ({\n  payload: favorites,\n}));\n\nexport const updateFavorites = createAction(ActionType.UPDATE_FAVORITES, (favorites) => ({\n  payload: favorites,\n}));\n\nexport const setIsOfferDataLoaded = createAction(ActionType.SET_IS_OFFER_DATA_LOADED, (value) => ({\n  payload: value,\n}));\n\nexport const setIsDataLoadError = createAction(ActionType.SET_IS_DATA_LOAD_ERROR, (value) => ({\n  payload: value,\n}));\n\nexport const setIsReviewSending = createAction(ActionType.SET_IS_REVIEW_SENDING, (value) => ({\n  payload: value,\n}));\n\nexport const requireAuthorization = createAction(ActionType.REQUIRED_AUTHORIZATION, (status) => ({\n  payload: status,\n}));\n\nexport const logout = createAction(ActionType.LOGOUT);\n\nexport const getUserData = createAction(ActionType.GET_USER_DATA, (userData) => ({\n  payload: userData,\n}));\n","import {createReducer} from '@reduxjs/toolkit';\nimport {changeCity, changeSort, changeActiveCard} from '../action';\nimport {SortType, DEFAULT_CITY} from '../../const';\n\nconst initialState = {\n  activeCityName: DEFAULT_CITY,\n  activeSortType: SortType.POPULAR,\n  activePlaceCard: null,\n};\n\nconst offers = createReducer(initialState, (builder) => {\n  builder\n    .addCase(changeCity, (state, action) => {\n      state.activeSortType = SortType.POPULAR;\n      state.activeCityName = action.payload;\n    })\n    .addCase(changeSort, (state, action) => {\n      state.activeSortType = action.payload;\n    })\n    .addCase(changeActiveCard, (state, action) => {\n      state.activePlaceCard = action.payload;\n    });\n});\n\nexport {offers};\n","import {createReducer} from '@reduxjs/toolkit';\nimport {requireAuthorization, logout, getUserData} from '../action';\nimport {AuthorizationStatus} from '../../const';\n\nconst initialState = {\n  authorizationStatus: AuthorizationStatus.UNKNOWN,\n  userData: {},\n};\n\nconst user = createReducer(initialState, (builder) => {\n  builder\n    .addCase(requireAuthorization, (state, action) => {\n      state.authorizationStatus = action.payload;\n    })\n    .addCase(logout, (state) => {\n      state.authorizationStatus = AuthorizationStatus.NO_AUTH;\n    })\n    .addCase(getUserData, (state, action) => {\n      state.userData = action.payload;\n    });\n});\n\nexport {user};\n","import {\n  loadOffers,\n  loadNearbyOffers,\n  loadOffer,\n  loadReviews,\n  loadFavorites,\n  updateFavorites,\n  setIsOfferDataLoaded,\n  setIsDataLoadError,\n  setIsReviewSending,\n  fillOffersList\n} from '../action';\nimport {createReducer} from '@reduxjs/toolkit';\nimport {DEFAULT_CITY} from '../../const';\n\nconst initialState = {\n  offers: [],\n  allOffers: [],\n  nearbyOffers: [],\n  favoritesOffers: [],\n  offer: {},\n  reviews: [],\n  isDataLoaded: false,\n  isOfferDataLoaded: false,\n  isDataLoadError: false,\n  isReviewSending: false,\n};\n\nconst data = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadOffers, (state, action) => {\n      state.allOffers = action.payload;\n      state.offers = action.payload.filter((offer) => offer.city.name === DEFAULT_CITY);\n      state.isDataLoaded = true;\n    })\n    .addCase(fillOffersList, (state, action) => {\n      state.offers = state.allOffers.filter((offer) => offer.city.name === action.payload);\n    })\n    .addCase(loadNearbyOffers, (state, action) => {\n      state.nearbyOffers = action.payload;\n    })\n    .addCase(loadOffer, (state, action) => {\n      state.offer = action.payload;\n      state.isOfferDataLoaded = true;\n    })\n    .addCase(loadReviews, (state, action) => {\n      state.reviews = action.payload;\n    })\n    .addCase(loadFavorites, (state, action) => {\n      state.favoritesOffers = action.payload;\n    })\n    .addCase(updateFavorites, (state, action) => {\n      state.allOffers.find((item) => item.id === action.payload.id).isFavorite = action.payload.isFavorite;\n\n      const index = state.favoritesOffers.findIndex((item) => item.id === action.payload.id);\n      state.favoritesOffers.splice(index, 1);\n\n      if (Object.keys(state.offer).length !== 0) {\n        state.offer.isFavorite = action.payload.isFavorite;\n      }\n\n      if (state.offers.some((item) => item.id === action.payload.id)) {\n        state.offers.find((item) => item.id === action.payload.id).isFavorite = action.payload.isFavorite;\n      }\n\n      if (state.nearbyOffers.some((item) => item.id === action.payload.id)) {\n        state.nearbyOffers.find((item) => item.id === action.payload.id).isFavorite = action.payload.isFavorite;\n      }\n    })\n    .addCase(setIsOfferDataLoaded, (state, action) => {\n      state.isOfferDataLoaded = action.payload;\n    })\n    .addCase(setIsDataLoadError, (state, action) => {\n      state.isDataLoadError = action.payload;\n    })\n    .addCase(setIsReviewSending, (state, action) => {\n      state.isReviewSending = action.payload;\n    });\n});\n\nexport {data};\n","import {combineReducers} from '@reduxjs/toolkit';\nimport {offers} from './offers/offers';\nimport {user} from './user/user';\nimport {data} from './data/data';\n\nexport const NameSpace = {\n  OFFERS: 'OFFERS',\n  DATA: 'DATA',\n  USER: 'USER',\n};\n\nexport default combineReducers({\n  [NameSpace.OFFERS]: offers,\n  [NameSpace.DATA]: data,\n  [NameSpace.USER]: user,\n});\n","import {NameSpace} from '../root-reducer';\n\nexport const getAuthorizationStatus = (state) => state[NameSpace.USER].authorizationStatus;\nexport const getUserData = (state) => state[NameSpace.USER].userData;\n","export const adaptOfferToClient = (offer) => {\n  const adaptedOffer = {\n    ...offer,\n    host: {\n      ...offer.host,\n      avatarUrl: offer.host['avatar_url'],\n      isPro: offer.host['is_pro'],\n    },\n    isFavorite: offer['is_favorite'],\n    isPremium: offer['is_premium'],\n    maxAdults: offer['max_adults'],\n    previewImage: offer['preview_image'],\n  };\n\n  delete adaptedOffer.host['avatar_url'];\n  delete adaptedOffer.host['is_pro'];\n  delete adaptedOffer['is_favorite'];\n  delete adaptedOffer['is_premium'];\n  delete adaptedOffer['max_adults'];\n  delete adaptedOffer['preview_image'];\n\n  return adaptedOffer;\n};\n\nexport const adaptUserToClient = (userData) => {\n  const adaptedUser = {\n    ...userData,\n    avatarUrl: userData.avatar_url,\n    isPro: userData.is_pro,\n  };\n\n  delete adaptedUser.token;\n  delete adaptedUser.avatar_url;\n  delete adaptedUser.is_pro;\n\n  return adaptedUser;\n};\n\nexport const adaptReviewToClient = (review) => {\n  const adaptedReview = {\n    ...review,\n    user: {\n      avatarUrl: review.user.avatar_url,\n      isPro: review.user.is_pro,\n    },\n  };\n\n  delete adaptedReview.user.avatar_url;\n  delete adaptedReview.user.is_pro;\n\n  return adaptedReview;\n};\n","import {loadOffers,\n  loadNearbyOffers,\n  loadOffer,\n  setIsDataLoadError,\n  setIsReviewSending,\n  loadReviews,\n  loadFavorites,\n  updateFavorites,\n  requireAuthorization,\n  getUserData,\n  logout as closeSession} from './action';\nimport {APIRoute, AuthorizationStatus} from '../const';\nimport {adaptOfferToClient, adaptUserToClient, adaptReviewToClient} from './adapter';\n\nexport const fetchOffersList = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.OFFERS)\n    .then(({data}) => {\n      dispatch(loadOffers(data.map(adaptOfferToClient)));\n    })\n);\n\nexport const fetchNearbyOffersList = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.OFFERS}/${id}${APIRoute.NEARBY_OFFERS}`)\n    .then(({data}) => dispatch(loadNearbyOffers(data.map(adaptOfferToClient))))\n);\n\nexport const fetchOffer = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.OFFERS}/${id}`)\n    .then(({data}) => dispatch(loadOffer(adaptOfferToClient(data))))\n    .catch(() => dispatch(setIsDataLoadError(true)))\n);\n\nexport const fetchReviewsList = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.REVIEWS}/${id}`)\n    .then(({data}) => dispatch(loadReviews(data.map(adaptReviewToClient))))\n);\n\nexport const fetchFavorites = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.FAVORITE)\n    .then(({data}) => {\n      dispatch(loadFavorites(data.map(adaptOfferToClient)));\n    })\n);\n\nexport const checkAuth = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.LOGIN)\n    .then(() => dispatch(requireAuthorization(AuthorizationStatus.AUTH)))\n    .catch(() => {})\n);\n\nexport const login = ({login: email, password}) => (dispatch, _getState, api) => (\n  api.post(APIRoute.LOGIN, {email, password})\n    .then(({data}) => {\n      localStorage.setItem('token', data.token);\n      dispatch(getUserData(adaptUserToClient(data)));\n    })\n    .then(() => dispatch(requireAuthorization(AuthorizationStatus.AUTH)))\n);\n\nexport const logout = () => (dispatch, _getState, api) => (\n  api.delete(APIRoute.LOGOUT)\n    .then(() => localStorage.removeItem('token'))\n    .then(() => dispatch(closeSession()))\n);\n\nexport const postReview = (id, comment, rating) => (dispatch, _getState, api) => {\n  dispatch(setIsReviewSending(true));\n  api.post(`${APIRoute.REVIEWS}/${id}`, {comment, rating})\n    .then(({data}) => {\n      dispatch(setIsReviewSending(false));\n      dispatch(loadReviews(data.map(adaptReviewToClient)));\n    });\n};\n\nexport const postFavorite = (id, status) => (dispatch, _getState, api) => (\n  api.post(`${APIRoute.FAVORITE}/${id}/${status}`)\n    .then(({data}) => {dispatch(updateFavorites(adaptOfferToClient(data)));})\n    .catch(() => [])\n    .then(dispatch(fetchFavorites()))\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {useHistory} from 'react-router-dom';\n\nimport {Colors, AuthorizationStatus, AppRoute, placeCardButtonType} from '../../const';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\nimport {postFavorite} from '../../store/api-actions';\n\nfunction FavoritesButton({isFavorite, id, buttonType = placeCardButtonType.card}) {\n  const dispatch = useDispatch();\n  const auth = useSelector(getAuthorizationStatus);\n  const history = useHistory();\n\n  const handleClick = () => {\n    if (auth !== AuthorizationStatus.AUTH) {\n      history.push(AppRoute.LOGIN);\n      return;\n    }\n\n    dispatch(postFavorite(id, isFavorite ? 0 : 1));\n  };\n\n  return (\n    <button className={buttonType.class} type=\"button\" onClick={handleClick}>\n      <svg className=\"place-card__bookmark-icon\" width={buttonType.width} height={buttonType.height}\n        style={{stroke: isFavorite ? Colors.FAVORITE_CHECKED : Colors.FAVORITE_NOT_CHECKED,\n          fill: isFavorite ? Colors.FAVORITE_CHECKED : null}}\n      >\n        <use xlinkHref=\"#icon-bookmark\" />\n      </svg>\n      <span className=\"visually-hidden\">To bookmarks</span>\n    </button>\n  );\n}\n\nFavoritesButton.propTypes = {\n  isFavorite: PropTypes.bool.isRequired,\n  id: PropTypes.number.isRequired,\n  buttonType: PropTypes.shape({\n    class: PropTypes.string.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n  }).isRequired,\n};\n\nexport default FavoritesButton;\n","const RATING_MULTIPLIER = 20;\n\nexport const getPlaceRatingPercent = (rating) => `${rating.toFixed() * RATING_MULTIPLIER}%`;\n\n","import React from 'react';\nimport {useDispatch} from 'react-redux';\nimport {Link, generatePath} from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport offersProp from '../app/offers.prop';\n\nimport FavoritesButton from '../favorites-button/favorites-button';\n\nimport {changeActiveCard} from '../../store/action';\nimport {AppRoute, placeCardPageType} from '../../const';\nimport {getPlaceRatingPercent} from '../../utils/place-card';\n\nfunction PlaceCard({offer, pageType, setActivePlaceCard, activePlaceCard}) {\n  const dispatch = useDispatch();\n\n  const {\n    id,\n    previewImage,\n    price,\n    rating,\n    title,\n    type,\n    isFavorite,\n    isPremium,\n  } = offer;\n\n  const placeRating = getPlaceRatingPercent(rating);\n\n  return (\n    <article className={`${pageType.classListElement} place-card`}\n      onMouseEnter={pageType.type === placeCardPageType.main.type ? () => {\n        setActivePlaceCard(id);\n        dispatch(changeActiveCard(id));\n      } : null}\n      onMouseLeave={pageType.type === placeCardPageType.main.type ? () => {\n        activePlaceCard = null;\n        dispatch(changeActiveCard(null));\n      } : null}\n    >\n      {isPremium && (\n        <div className=\"place-card__mark\">\n          <span>Premium</span>\n        </div>\n      )}\n      <div className={`${pageType.classListElementWrapper} place-card__image-wrapper`}>\n        <Link to={{pathname: generatePath(AppRoute.OFFER, { id })}}>\n          <img className=\"place-card__image\" src={previewImage} width={pageType.cardImageWidth} height={pageType.cardImageHeight} alt=\"Place\" />\n        </Link>\n      </div>\n      <div className=\"place-card__info\">\n        <div className=\"place-card__price-wrapper\">\n          <div className=\"place-card__price\">\n            <b className=\"place-card__price-value\">&euro;{price}</b>\n            <span className=\"place-card__price-text\">&#47;&nbsp;night</span>\n          </div>\n          <FavoritesButton isFavorite={isFavorite} id={id}/>\n        </div>\n        <div className=\"place-card__rating rating\">\n          <div className=\"place-card__stars rating__stars\">\n            <span style={{width: placeRating}} />\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <h2 className=\"place-card__name\">\n          <Link to={{pathname: generatePath(AppRoute.OFFER, { id })}}>{title}</Link>\n        </h2>\n        <p className=\"place-card__type\">{type}</p>\n      </div>\n    </article>\n  );\n}\n\nPlaceCard.propTypes = {\n  offer: offersProp,\n  pageType: PropTypes.object.isRequired,\n  setActivePlaceCard: PropTypes.func,\n  activePlaceCard: PropTypes.number,\n};\n\nexport default PlaceCard;\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport offersProp from '../app/offers.prop';\nimport PlaceCard from '../place-card/place-card';\n\nfunction PlaceCardList({offers, pageType}) {\n  const [activePlaceCard, setActivePlaceCard] = useState(null);\n\n  return(\n    <>\n      {offers.map((offer) =>\n        <PlaceCard key={offer.id} offer={offer} pageType={pageType} setActivePlaceCard={setActivePlaceCard} activePlaceCard={activePlaceCard} />)}\n    </>\n  );\n}\n\nPlaceCardList.propTypes = {\n  offers: PropTypes.arrayOf(offersProp).isRequired,\n  pageType: PropTypes.object.isRequired,\n};\n\nexport default PlaceCardList;\n","import React from 'react';\nimport {NavLink} from 'react-router-dom';\nimport {AppRoute} from '../../const';\n\nfunction Logo() {\n  return (\n    <NavLink className=\"header__logo-link\"\n      to={AppRoute.MAIN}\n      activeClassName=\"header__logo-link--active\"\n      isActive={(match, {pathname}) => !match ? false : pathname === AppRoute.MAIN}\n    >\n      <img className=\"header__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width=\"81\" height=\"41\" />\n    </NavLink>\n  );\n}\n\nexport default Logo;\n","import React from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {Link} from 'react-router-dom';\nimport {AppRoute} from '../../const';\nimport {logout} from '../../store/api-actions';\nimport {getUserData} from '../../store/user/selectors';\n\nfunction AuthUser() {\n  const dispatch = useDispatch();\n  const user = useSelector(getUserData);\n\n  const avatarUrl = user.avatarUrl;\n  const email = user.email;\n\n  const handleClick = () => {\n    dispatch(logout());\n  };\n\n  return (\n    <ul className=\"header__nav-list\">\n      <li className=\"header__nav-item user\">\n        <Link className=\"header__nav-link header__nav-link--profile\" to={AppRoute.FAVORITES}>\n          <div className=\"header__avatar-wrapper user__avatar-wrapper\">\n            <img src={avatarUrl} alt=\"user\" />\n          </div>\n          <span className=\"header__user-name user__name\">{email}</span>\n        </Link>\n      </li>\n      <li className=\"header__nav-item\">\n        <Link className=\"header__nav-link\" to={AppRoute.LOGIN}>\n          <span\n            onClick={handleClick}\n            className=\"header__signout\"\n          >\n            Sign out\n          </span>\n        </Link>\n      </li>\n    </ul>\n  );\n}\n\nexport default AuthUser;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {AppRoute} from '../../const';\n\nfunction NoAuthUser() {\n  return (\n    <ul className=\"header__nav-list\">\n      <li className=\"header__nav-item user\">\n        <Link className=\"header__nav-link header__nav-link--profile\" href=\"#\" to={AppRoute.LOGIN}>\n          <div className=\"header__avatar-wrapper user__avatar-wrapper\">\n          </div>\n          <span className=\"header__login\">Sign in</span>\n        </Link>\n      </li>\n    </ul>\n  );\n}\n\nexport default NoAuthUser;\n","import React from 'react';\nimport {useSelector} from 'react-redux';\n\nimport Logo from '../logo/logo';\nimport AuthUser from '../auth-user/auth-user';\nimport NoAuthUser from '../no-auth-user/no-auth-user';\n\nimport {AuthorizationStatus} from '../../const';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\nfunction Header() {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  return (\n    <header className=\"header\">\n      <div className=\"container\">\n        <div className=\"header__wrapper\">\n          <div className=\"header__left\">\n            <Logo />\n          </div>\n          <nav className=\"header__nav\">\n            {authorizationStatus === AuthorizationStatus.AUTH ? <AuthUser /> : <NoAuthUser />}\n          </nav>\n        </div>\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction MainEmpty({city}) {\n  return (\n    <div className=\"cities\">\n      <div className=\"cities__places-container cities__places-container--empty container\">\n        <section className=\"cities__no-places\">\n          <div className=\"cities__status-wrapper tabs__content\">\n            <b className=\"cities__status\">No places to stay available</b>\n            <p className=\"cities__status-description\">We could not find any property available at the moment in {city}</p>\n          </div>\n        </section>\n        <div className=\"cities__right-section\" />\n      </div>\n    </div>\n  );\n}\n\nMainEmpty.propTypes = {\n  city: PropTypes.string.isRequired,\n};\n\nexport default MainEmpty;\n","import {NameSpace} from '../root-reducer';\n\nexport const getOffers = (state) => state[NameSpace.DATA].offers;\nexport const getAllOffers = (state) => state[NameSpace.DATA].allOffers;\nexport const getNearbyOffers = (state) => state[NameSpace.DATA].nearbyOffers;\nexport const getOffer = (state) => state[NameSpace.DATA].offer;\nexport const getReviews = (state) => state[NameSpace.DATA].reviews;\nexport const getFavorites = (state) => state[NameSpace.DATA].favoritesOffers;\nexport const getIsDataLoaded = (state) => state[NameSpace.DATA].isDataLoaded;\nexport const getIsOfferDataLoaded = (state) => state[NameSpace.DATA].isOfferDataLoaded;\nexport const getIsDataLoadError = (state) => state[NameSpace.DATA].isDataLoadError;\nexport const getIsReviewSending = (state) => state[NameSpace.DATA].isReviewSending;\n","import {createSelector} from 'reselect';\nimport {NameSpace} from '../root-reducer';\nimport {getAllOffers} from '../data/selectors';\n\nexport const getActiveCityName = (state) => state[NameSpace.OFFERS].activeCityName;\nexport const getActiveSortType = (state) => state[NameSpace.OFFERS].activeSortType;\nexport const getActivePlaceCard = (state) => state[NameSpace.OFFERS].activePlaceCard;\n\nexport const getActiveCity = createSelector(\n  getActiveCityName,\n  getAllOffers,\n  (activeCityName, allOffers) => allOffers.find((offer) => offer.city.name === activeCityName).city,\n);\n","import React from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {CITIES} from '../../const';\nimport {getActiveCityName} from '../../store/offers/selectors';\nimport {changeCity, fillOffersList} from '../../store/action';\n\nfunction CitiesList() {\n  const dispatch = useDispatch();\n  const city = useSelector(getActiveCityName);\n\n  return (\n    <ul className=\"locations__list tabs__list\">\n      {CITIES.map((itemCity) => (\n        <li className=\"locations__item\" key={itemCity}>\n          <a\n            className={`locations__item-link tabs__item ${itemCity === city ? 'tabs__item--active' : ''}`}\n            href={`#${itemCity}`}\n            onClick={() => {\n              dispatch(changeCity(itemCity));\n              dispatch(fillOffersList(itemCity));\n            }}\n          >\n            <span>{itemCity}</span>\n          </a>\n        </li>),\n      )}\n    </ul>\n  );\n}\n\nexport default CitiesList;\n","import {useEffect, useState} from 'react';\nimport leaflet from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nfunction useMap (containerRef, city) {\n  const [map, setMap] = useState(null);\n\n  useEffect(() => {\n    if (containerRef.current !== null && map === null) {\n      const instance = leaflet.map(containerRef.current, {\n        center: {\n          lat: city.location.latitude,\n          lng: city.location.longitude,\n        },\n        zoom: city.location.zoom,\n      });\n\n      leaflet\n        .tileLayer(\n          'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',\n          {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n          },\n        )\n        .addTo(instance);\n\n      setMap(instance);\n    }\n  }, [containerRef, map, city]);\n\n  return map;\n}\n\nexport default useMap;\n","import React, {useRef, useEffect} from 'react';\nimport {useSelector} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport offersProp from '../app/offers.prop';\nimport useMap from '../../hooks/useMap';\nimport {getActivePlaceCard} from '../../store/offers/selectors';\n\nimport leaflet from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nconst ICON_SIZE = 30;\nconst ICON_URL_DEFAULT = 'img/pin.svg';\nconst ICON_URL_ACTIVE = 'img/pin-active.svg';\n\nfunction Map({offers, city}) {\n  const activePlaceCard = useSelector(getActivePlaceCard);\n\n  const mapContainerRef = useRef(null);\n  const map = useMap(mapContainerRef, city);\n\n  const defaultIcon = leaflet.icon({\n    iconUrl: ICON_URL_DEFAULT,\n    iconSize: [ICON_SIZE, ICON_SIZE],\n    iconAnchor: [ICON_SIZE / 2, ICON_SIZE],\n  });\n\n  const activeIcon = leaflet.icon({\n    iconUrl: ICON_URL_ACTIVE,\n    iconSize: [ICON_SIZE, ICON_SIZE],\n    iconAnchor: [ICON_SIZE / 2, ICON_SIZE],\n  });\n\n  useEffect(() => {\n    const markers = leaflet.layerGroup();\n\n    if (map) {\n      markers.addTo(map);\n\n      offers.forEach((offer) => {\n        leaflet\n          .marker({\n            lat: offer.location.latitude,\n            lng: offer.location.longitude,\n          }, {\n            icon: (offer.id === activePlaceCard) ? activeIcon : defaultIcon,\n          })\n          .addTo(markers);\n      });\n\n      map.flyTo(\n        [\n          city.location.latitude,\n          city.location.longitude,\n        ],\n        city.location.zoom,\n      );\n    }\n\n    return () => {\n      markers.clearLayers();\n    };\n  }, [map, offers, activePlaceCard]);\n\n  return (\n    <div id=\"map\" style={{height: '100%'}} ref={mapContainerRef} />\n  );\n}\n\nMap.propTypes = {\n  offers: PropTypes.arrayOf(offersProp).isRequired,\n  city : PropTypes.shape({\n    location: PropTypes.shape({\n      latitude: PropTypes.number.isRequired,\n      longitude: PropTypes.number.isRequired,\n      zoom: PropTypes.number.isRequired,\n    }),\n    name: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default Map;\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {useDispatch} from 'react-redux';\nimport {SortType} from '../../const';\nimport {changeSort} from '../../store/action';\n\nconst sorts = Object.values(SortType);\n\nfunction SortForm({sortType}) {\n  const dispatch = useDispatch();\n  const [sortIsOpen, setSortIsOpen] = useState(false);\n\n  const toggleSort = () => setSortIsOpen(!sortIsOpen);\n\n  return (\n    <form className=\"places__sorting\" action=\"#\" method=\"get\">\n      <span className=\"places__sorting-caption\">Sort by </span>\n      <span className=\"places__sorting-type\" tabIndex=\"0\" onClick={toggleSort}>\n        {sortType}\n        <svg className=\"places__sorting-arrow\" width=\"7\" height=\"4\">\n          <use xlinkHref=\"#icon-arrow-select\"/>\n        </svg>\n      </span>\n      <ul className={`${sortIsOpen ? 'places__options--opened' : ''} places__options places__options--custom`}>\n        {sorts.map((sort) => (\n          <li\n            key={sort}\n            className={`${sortType === sort ? 'places__option--active' : ''} places__option`}\n            tabIndex=\"0\"\n            onClick={() => {\n              dispatch(changeSort(sort));\n              toggleSort();\n            }}\n          >\n            {sort}\n          </li>\n        ))}\n      </ul>\n    </form>\n  );\n}\n\nSortForm.propTypes = {\n  sortType: PropTypes.string.isRequired,\n};\n\nexport default SortForm;\n","import {SortType} from '../const';\n\nexport const sortOffers = (sort, offers) => {\n  switch (sort) {\n    case SortType.PRICE_HIGH:\n      return offers.slice().sort((a, b) => b.price - a.price);\n    case SortType.PRICE_LOW:\n      return offers.slice().sort((a, b) => a.price - b.price);\n    case SortType.TOP_RATED:\n      return offers.slice().sort((a, b) => b.rating - a.rating);\n    default:\n      return offers;\n  }\n};\n","import React from 'react';\nimport {useSelector} from 'react-redux';\n\nimport PlaceCardList from '../../place-card-list/place-card-list';\nimport Header from '../../header/header';\nimport MainEmpty from '../../main-empty/main-empty';\nimport CitiesList from '../../cities-list/cities-list';\nimport Map from '../../map/map';\nimport SortForm from '../../sort-form/sort-form';\n\nimport {placeCardPageType} from '../../../const';\nimport {sortOffers} from '../../../utils/sort';\nimport {getOffers} from '../../../store/data/selectors';\nimport {getActiveCity, getActiveCityName, getActiveSortType} from '../../../store/offers/selectors';\n\nfunction MainPage() {\n  const offers = useSelector(getOffers);\n  const cityName = useSelector(getActiveCityName);\n  const city = useSelector(getActiveCity);\n  const sortType = useSelector(getActiveSortType);\n\n  return (\n    <div className={`${offers.length > 0 ? 'page page--gray' : 'page__main--index-empty page__main--index'} page--main`}>\n      <Header />\n      <main className=\"page__main page__main--index\">\n        <h1 className=\"visually-hidden\">Cities</h1>\n        <div className=\"tabs\">\n          <section className=\"locations container\">\n            <CitiesList />\n          </section>\n        </div>\n        { offers.length > 0 ? (\n          <div className=\"cities\">\n            <div className=\"cities__places-container container\">\n              <section className=\"cities__places places\">\n                <h2 className=\"visually-hidden\">Places</h2>\n                <b className=\"places__found\">{offers.length} {offers.length > 1 ? 'places' : 'place'} to stay in {cityName}</b>\n                <SortForm sortType={sortType}/>\n                <div className=\"cities__places-list places__list tabs__content\">\n                  <PlaceCardList\n                    offers={sortOffers(sortType, offers)}\n                    pageType={placeCardPageType.main}\n                  />\n                </div>\n              </section>\n              <div className=\"cities__right-section\">\n                <section className=\"cities__map map\">\n                  <Map\n                    offers={offers}\n                    city={city}\n                  />\n                </section>\n              </div>\n            </div>\n          </div>\n        ) : <MainEmpty city={cityName}/>}\n      </main>\n    </div>\n  );\n}\n\nexport default (MainPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst RATINGS = [\n  {\n    title: 'perfect',\n    id: 5,\n  },\n  {\n    title: 'good',\n    id: 4,\n  },\n  {\n    title: 'not bad',\n    id: 3,\n  },\n  {\n    title: 'badly',\n    id: 2,\n  },\n  {\n    title: 'terribly',\n    id: 1,\n  },\n];\n\nfunction ReviewRatingStars({handleRatingChange, rateChecked}) {\n  return (\n    <div className=\"reviews__rating-form form__rating\" onChange={handleRatingChange}>\n      {RATINGS.map((rate) => (\n        <React.Fragment key={rate.id}>\n          <input\n            className=\"form__rating-input visually-hidden\"\n            name=\"rating\"\n            value={rate.id}\n            id={`${rate.id}-stars`}\n            type=\"radio\"\n            checked={rateChecked === rate.id}\n          />\n          <label htmlFor={`${rate.id}-stars`} className=\"reviews__rating-label form__rating-label\" title={rate.title}>\n            <svg className=\"form__star-image\" width=\"37\" height=\"33\">\n              <use xlinkHref=\"#icon-star\"/>\n            </svg>\n          </label>\n        </React.Fragment>\n      ))}\n    </div>\n  );\n}\n\nReviewRatingStars.propTypes = {\n  handleRatingChange: PropTypes.func.isRequired,\n  rateChecked: PropTypes.number.isRequired,\n};\n\nexport default ReviewRatingStars;\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {useDispatch, useSelector} from 'react-redux';\n\nimport ReviewRatingStars from '../review-rating-stars/review-rating-stars';\n\nimport {postReview} from '../../store/api-actions';\nimport {getIsReviewSending} from '../../store/data/selectors';\n\nconst ReviewLength = {\n  MIN: 50,\n  MAX: 300,\n};\n\nfunction ReviewForm({id}) {\n  const dispatch = useDispatch();\n  const isReviewSending = useSelector(getIsReviewSending);\n  const [userReview, setUserReview] = useState({rating: '', text: ''});\n\n  const handleFormSubmit = (evt) => {\n    evt.preventDefault();\n\n    dispatch(postReview(id, userReview.text, userReview.rating));\n    setUserReview({rating: '', text: ''});\n  };\n  const handleTextChange = ({target}) => {\n    setUserReview({...userReview, text: target.value});\n  };\n  const handleRatingChange = ({target}) => {\n    setUserReview({...userReview, rating: target.value});\n  };\n\n  return (\n    <form className=\"reviews__form form\" action=\"#\" method=\"post\" onSubmit={handleFormSubmit}>\n      <label className=\"reviews__label form__label\" htmlFor=\"review\">Your review</label>\n      <ReviewRatingStars handleRatingChange={handleRatingChange} rateChecked={+userReview.rating}/>\n      <textarea className=\"reviews__textarea form__textarea\"\n        id=\"review\"\n        name=\"review\"\n        placeholder=\"Tell how was your stay, what you like and what can be improved\"\n        minLength={ReviewLength.MIN}\n        maxLength={ReviewLength.MAX}\n        onChange={handleTextChange}\n        value={userReview.text}\n        disabled={isReviewSending}\n      />\n      <div className=\"reviews__button-wrapper\">\n        <p className=\"reviews__help\">\n          To submit review please make sure to set <span className=\"reviews__star\">rating</span> and\n          describe your stay with at least <b className=\"reviews__text-amount\">50 characters</b>.\n        </p>\n        <button\n          className=\"reviews__submit form__submit button\"\n          type=\"submit\"\n          disabled={isReviewSending || !(userReview.text.length >= ReviewLength.MIN && userReview.rating)}\n        >Submit\n        </button>\n      </div>\n    </form>\n  );\n}\n\nReviewForm.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default ReviewForm;\n","import PropTypes from 'prop-types';\n\nexport default PropTypes.shape({\n  comment: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n  rating: PropTypes.number.isRequired,\n  user: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    id: PropTypes.number.isRequired,\n    isPro: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n  }).isRequired,\n}).isRequired;\n","import React from 'react';\nimport reviewsProp from '../app/reviews.prop';\nimport {getPlaceRatingPercent} from '../../utils/place-card';\n\nfunction ReviewItem({review}) {\n  const {\n    comment,\n    date,\n    rating,\n    user,\n  } = review;\n\n  const reviewRating = getPlaceRatingPercent(rating);\n  const reviewDate = new Date(date).toLocaleDateString('en-US', {year: 'numeric', month: 'long'});\n\n  return (\n    <li className=\"reviews__item\">\n      <div className=\"reviews__user user\">\n        <div className=\"reviews__avatar-wrapper user__avatar-wrapper\">\n          <img className=\"reviews__avatar user__avatar\" src={user.avatarUrl} width=\"54\" height=\"54\" alt=\"Reviews avatar\" />\n        </div>\n        <span className=\"reviews__user-name\">{user.name}</span>\n      </div>\n      <div className=\"reviews__info\">\n        <div className=\"reviews__rating rating\">\n          <div className=\"reviews__stars rating__stars\">\n            <span style={{width: reviewRating}} />\n            <span className=\"visually-hidden\">Rating</span>\n          </div>\n        </div>\n        <p className=\"reviews__text\">\n          {comment}\n        </p>\n        <time className=\"reviews__time\" dateTime={date}>{reviewDate}</time>\n      </div>\n    </li>\n  );\n}\n\nReviewItem.propTypes = {\n  review: reviewsProp,\n};\n\nexport default ReviewItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport reviewsProp from '../app/reviews.prop';\nimport ReviewItem from '../review-item/review-item';\n\nfunction ReviewList({reviews}) {\n  return (\n    <ul className=\"reviews__list\">\n      {reviews.map((review) =>\n        <ReviewItem key={review.id} review={review} />,\n      )}\n    </ul>\n  );\n}\n\nReviewList.propTypes = {\n  reviews: PropTypes.arrayOf(reviewsProp).isRequired,\n};\n\nexport default ReviewList;\n","import React from 'react';\n\nfunction LoadingScreen() {\n  return (\n    <div style={{margin: '30% 50%'}}>\n      <svg\n        className=\"spinner\"\n        style={{\n          animation: 'rotate 2s linear infinite',\n          zIndex: 2,\n          width: '50px',\n          height: '50px',\n        }}\n      >\n        <circle\n          className=\"path\"\n          cx=\"25\"\n          cy=\"25\"\n          r=\"20\"\n          fill=\"none\"\n          strokeWidth=\"5\"\n          style={{\n            stroke: '#009acc',\n            strokeLinecap: 'round',\n            animation: 'dash 1.5s ease-in-out infinite',\n          }}\n        />\n      </svg>\n      <p>Loading...</p>\n    </div>\n  );\n}\n\nexport default LoadingScreen;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {AppRoute} from '../../../const';\nimport Logo from '../../logo/logo';\n\nfunction NotFoundPage() {\n  return (\n    <div className=\"page page--gray page--main\">\n      <header className=\"header\">\n        <div className=\"container\">\n          <div className=\"header__wrapper\">\n            <Logo />\n          </div>\n        </div>\n      </header>\n      <section style={{margin: '0 auto'}}>\n        <h1>404 Page Not Found</h1>\n        <Link to={AppRoute.MAIN}>\n          Вернуться на главную\n        </Link>\n      </section>\n    </div>\n  );\n}\n\nexport default NotFoundPage;\n","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {useLocation} from 'react-router-dom';\n\nimport PlaceCardList from '../../place-card-list/place-card-list';\nimport Header from '../../header/header';\nimport ReviewForm from '../../review-form/review-form';\nimport ReviewList from '../../review-list/review-list';\nimport Map from '../../map/map';\nimport LoadingScreen from '../../loading-screen/loading-screen';\nimport NotFoundPage from '../not-found-page/not-found-page';\nimport FavoritesButton from '../../favorites-button/favorites-button';\n\nimport {placeCardButtonType, placeCardPageType, AuthorizationStatus} from '../../../const';\nimport {getPlaceRatingPercent} from '../../../utils/place-card';\nimport {changeActiveCard, setIsOfferDataLoaded, setIsDataLoadError} from '../../../store/action';\nimport {fetchOffer, fetchNearbyOffersList, fetchReviewsList} from '../../../store/api-actions';\nimport {getOffer, getReviews, getNearbyOffers, getIsOfferDataLoaded, getIsDataLoadError} from '../../../store/data/selectors';\nimport {getActiveCity} from '../../../store/offers/selectors';\nimport {getAuthorizationStatus} from '../../../store/user/selectors';\n\nconst MAX_IMG_COUNT = 6;\n\nfunction OfferPage() {\n  const dispatch = useDispatch();\n\n  const offer = useSelector(getOffer);\n  const reviews = useSelector(getReviews);\n  const city = useSelector(getActiveCity);\n  const nearbyOffers = useSelector(getNearbyOffers);\n  const isOfferDataLoaded = useSelector(getIsOfferDataLoaded);\n  const isDataLoadError = useSelector(getIsDataLoadError);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  const location = useLocation();\n\n  const offerId = +location.pathname.replace('/offer/', '');\n  changeActiveCard(offerId);\n\n  const {\n    images,\n    title,\n    isPremium,\n    isFavorite,\n    rating,\n    type,\n    bedrooms,\n    maxAdults,\n    price,\n    goods,\n    host,\n    description,\n    id,\n  } = offer;\n\n  const placeRating = getPlaceRatingPercent(rating ? rating : 0);\n\n  useEffect(() => {\n    dispatch(fetchOffer(offerId));\n    dispatch(fetchNearbyOffersList(offerId));\n    dispatch(fetchReviewsList(offerId));\n\n    return () => {\n      dispatch(changeActiveCard(null));\n      dispatch(setIsOfferDataLoaded(false));\n      dispatch(setIsDataLoadError(false));\n    };\n  }, [offerId, AuthorizationStatus]);\n\n  if (isDataLoadError) {\n    return (\n      <NotFoundPage />\n    );\n  }\n\n  if (!isOfferDataLoaded) {\n    return (\n      <LoadingScreen />\n    );\n  }\n\n  return (\n    <div className=\"page\">\n      <Header />\n      <main className=\"page__main page__main--property\">\n        <section className=\"property\">\n          <div className=\"property__gallery-container container\">\n            <div className=\"property__gallery\">\n              {images.slice(0, MAX_IMG_COUNT).map((image) => (\n                <div className=\"property__image-wrapper\" key={image}>\n                  <img className=\"property__image\" src={image} alt={type}/>\n                </div>),\n              )}\n            </div>\n          </div>\n          <div className=\"property__container container\">\n            <div className=\"property__wrapper\">\n              {isPremium && (\n                <div className=\"property__mark\">\n                  <span>Premium</span>\n                </div>\n              )}\n              <div className=\"property__name-wrapper\">\n                <h1 className=\"property__name\">\n                  {title}\n                </h1>\n                <FavoritesButton id={id} isFavorite={isFavorite} buttonType={placeCardButtonType.offer} />\n              </div>\n              <div className=\"property__rating rating\">\n                <div className=\"property__stars rating__stars\">\n                  <span style={{width: placeRating}} />\n                  <span className=\"visually-hidden\">Rating</span>\n                </div>\n                <span className=\"property__rating-value rating__value\">{rating}</span>\n              </div>\n              <ul className=\"property__features\">\n                <li className=\"property__feature property__feature--entire\">\n                  {type}\n                </li>\n                <li className=\"property__feature property__feature--bedrooms\">\n                  {bedrooms} {bedrooms > 1 ? 'Bedrooms' : 'Bedroom'}\n                </li>\n                <li className=\"property__feature property__feature--adults\">\n                  Max {maxAdults} {maxAdults > 1 ? 'adults' : 'adult'}\n                </li>\n              </ul>\n              <div className=\"property__price\">\n                <b className=\"property__price-value\">&euro;{price}</b>\n                <span className=\"property__price-text\">&nbsp;night</span>\n              </div>\n              <div className=\"property__inside\">\n                <h2 className=\"property__inside-title\">What&apos;s inside</h2>\n                <ul className=\"property__inside-list\">\n                  {goods.map((property) =>\n                    <li className=\"property__inside-item\" key={property}>{property}</li>)}\n                </ul>\n              </div>\n              <div className=\"property__host\">\n                <h2 className=\"property__host-title\">Meet the host</h2>\n                <div className=\"property__host-user user\">\n                  <div className=\"property__avatar-wrapper property__avatar-wrapper--pro user__avatar-wrapper\">\n                    <img className=\"property__avatar user__avatar\" src={host.avatarUrl} width=\"74\" height=\"74\" alt=\"Host avatar\" />\n                  </div>\n                  <span className=\"property__user-name\">\n                    {host.name}\n                  </span>\n                  {host.isPro && (\n                    <span className=\"property__user-status\">\n                    Pro\n                    </span>\n                  )}\n                </div>\n                <div className=\"property__description\">\n                  <p className=\"property__text\">\n                    {description}\n                  </p>\n                </div>\n              </div>\n              <section className=\"property__reviews reviews\">\n                <h2 className=\"reviews__title\">Reviews &middot; <span className=\"reviews__amount\">{reviews.length}</span></h2>\n                <ReviewList reviews={reviews} />\n                {authorizationStatus === AuthorizationStatus.AUTH && (\n                  <ReviewForm id={offerId}/>\n                )}\n              </section>\n            </div>\n          </div>\n          <section className=\"property__map map\" >\n            <Map\n              offers={nearbyOffers.concat(offer)}\n              city={city}\n            />\n          </section>\n        </section>\n        <div className=\"container\">\n          <section className=\"near-places places\">\n            <h2 className=\"near-places__title\">Other places in the neighbourhood</h2>\n            <div className=\"near-places__list places__list\">\n              <PlaceCardList offers={nearbyOffers} pageType={placeCardPageType.offer}/>\n            </div>\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default OfferPage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport offersProp from '../app/offers.prop';\nimport PlaceCard from '../place-card/place-card';\nimport {placeCardPageType} from '../../const';\n\nfunction FavoritesListItem({favoriteOffers, favoriteCity}) {\n  return (\n    <li className=\"favorites__locations-items\">\n      <div className=\"favorites__locations locations locations--current\">\n        <div className=\"locations__item\">\n          <a className=\"locations__item-link\" href=\"#\">\n            <span>{favoriteCity}</span>\n          </a>\n        </div>\n      </div>\n      <div className=\"favorites__places\">\n        {favoriteOffers.map((offer) =>\n          <PlaceCard key={offer.id} offer={offer} pageType={placeCardPageType.favorite} />,\n        )}\n      </div>\n    </li>\n  );\n}\n\nFavoritesListItem.propTypes = {\n  favoriteOffers: PropTypes.oneOfType([\n    PropTypes.arrayOf(offersProp),\n    offersProp,\n  ]).isRequired,\n  favoriteCity: PropTypes.string.isRequired,\n};\n\nexport default FavoritesListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport offersProp from '../app/offers.prop';\nimport FavoritesListItem from '../favotites-list-item/favorites-list-item';\n\nfunction FavoritesList({favoriteOffers, favoritesUniqueCities}) {\n  const favoriteCities = Array.from(favoritesUniqueCities);\n\n  return (\n    <ul className=\"favorites__list\">\n      {favoriteCities.map((city) => (\n        <FavoritesListItem\n          key={city}\n          favoriteOffers={favoriteOffers.filter((offer) => offer.city.name === city)}\n          favoriteCity={city}\n        />\n      ))}\n    </ul>\n  );\n}\n\nFavoritesList.propTypes = {\n  favoriteOffers: PropTypes.oneOfType([\n    PropTypes.arrayOf(offersProp),\n    offersProp,\n  ]).isRequired,\n  favoritesUniqueCities: PropTypes.instanceOf(Set).isRequired,\n};\n\nexport default FavoritesList;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {AppRoute} from '../../const';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer container\">\n      <Link className=\"footer__logo-link\" to={AppRoute.MAIN}>\n        <img className=\"footer__logo\" src=\"img/logo.svg\" alt=\"6 cities logo\" width=\"64\" height=\"33\" />\n      </Link>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\n\nimport Header from '../header/header';\nimport Footer from '../footer/footer';\n\nfunction FavoritesEmpty() {\n  return (\n    <div className=\"page page--favorites-empty\">\n      <Header />\n      <main className=\"page__main page__main--favorites page__main--favorites-empty\">\n        <div className=\"page__favorites-container container\">\n          <section className=\"favorites favorites--empty\">\n            <h1 className=\"visually-hidden\">Favorites (empty)</h1>\n            <div className=\"favorites__status-wrapper\">\n              <b className=\"favorites__status\">Nothing yet saved.</b>\n              <p className=\"favorites__status-description\">Save properties to narrow down search or plan your future trips.</p>\n            </div>\n          </section>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n\nexport default FavoritesEmpty;\n","import React from 'react';\nimport {useSelector} from 'react-redux';\n\nimport Header from '../../header/header';\nimport FavoritesList from '../../favorites-list/favorites-list';\nimport FavoritesEmpty from '../../favorites-empty/favorites-empty';\nimport Footer from '../../footer/footer';\n\nimport {getFavorites} from '../../../store/data/selectors';\n\nfunction FavoritesPage() {\n  const favoriteOffers = useSelector(getFavorites);\n\n  if (favoriteOffers.length === 0) {\n    return <FavoritesEmpty />;\n  }\n\n  const favoritesUniqueCities = new Set();\n  favoriteOffers.forEach((offer) => favoritesUniqueCities.add(offer.city.name));\n\n  return (\n    <div className=\"page\">\n      <Header />\n      <main className=\"page__main page__main--favorites\">\n        <div className=\"page__favorites-container container\">\n          <section className=\"favorites\">\n            <h1 className=\"favorites__title\">Saved listing</h1>\n            <FavoritesList favoriteOffers={favoriteOffers} favoritesUniqueCities={favoritesUniqueCities} />\n          </section>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n\nexport default FavoritesPage;\n","import React, {useRef, useState} from 'react';\nimport {Link, useHistory} from 'react-router-dom';\nimport {useDispatch, useSelector} from 'react-redux';\n\nimport Header from '../../header/header';\n\nimport {login} from '../../../store/api-actions';\nimport {AppRoute, AuthorizationStatus} from '../../../const';\nimport {getAuthorizationStatus} from '../../../store/user/selectors';\n\nfunction LoginPage() {\n  const dispatch = useDispatch();\n  const auth = useSelector(getAuthorizationStatus);\n  const history = useHistory();\n  const [password, setPassword] = useState('');\n\n  if (auth === AuthorizationStatus.AUTH) {\n    history.push(AppRoute.MAIN);\n  }\n\n  const emailRef = useRef(null);\n\n  const handleChange = (evt) => {\n    setPassword(evt.target.value.trim());\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    dispatch(login({\n      login: emailRef.current.value,\n      password: password,\n    }));\n\n    history.push(AppRoute.MAIN);\n  };\n\n  return (\n    <div className=\"page page--gray page--login\">\n      <Header />\n      <main className=\"page__main page__main--login\">\n        <div className=\"page__login-container container\">\n          <section className=\"login\">\n            <h1 className=\"login__title\">Sign in</h1>\n            <form\n              onSubmit={handleSubmit}\n              className=\"login__form form\"\n              action=\"#\"\n              method=\"post\"\n            >\n              <div className=\"login__input-wrapper form__input-wrapper\">\n                <label className=\"visually-hidden\">E-mail</label>\n                <input\n                  ref={emailRef}\n                  className=\"login__input form__input\"\n                  type=\"email\"\n                  name=\"email\"\n                  placeholder=\"Email\"\n                  required=\"true\"\n                />\n              </div>\n              <div className=\"login__input-wrapper form__input-wrapper\">\n                <label className=\"visually-hidden\">Password</label>\n                <input\n                  onChange={handleChange}\n                  className=\"login__input form__input\"\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  required=\"true\"\n                  value={password}\n                />\n              </div>\n              <button className=\"login__submit form__submit button\" type=\"submit\">\n                Sign in\n              </button>\n            </form>\n          </section>\n          <section className=\"locations locations--login locations--current\">\n            <div className=\"locations__item\">\n              <Link className=\"locations__item-link\" href=\"#\" to={AppRoute.MAIN}>\n                <span>Amsterdam</span>\n              </Link>\n            </div>\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default LoginPage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route, Redirect} from 'react-router-dom';\nimport {useSelector} from 'react-redux';\nimport {AppRoute, AuthorizationStatus} from '../../const';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\n\nfunction PrivateRoute({render, path, exact}) {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={(routeProps) => (\n        authorizationStatus === AuthorizationStatus.AUTH\n          ? render(routeProps)\n          : <Redirect to={AppRoute.LOGIN} />\n      )}\n    />\n  );\n}\n\nPrivateRoute.propTypes = {\n  exact: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  render: PropTypes.func.isRequired,\n};\n\nexport default PrivateRoute;\n","import React from 'react';\nimport {Switch, Route, BrowserRouter} from 'react-router-dom';\nimport {useSelector} from 'react-redux';\n\nimport MainPage from '../pages/main-page/main-page';\nimport OfferPage from '../pages/offer-page/offer-page';\nimport FavoritesPage from '../pages/favorites-page/favorites-page';\nimport LoginPage from '../pages/login-page/login-page';\nimport NotFoundPage from '../pages/not-found-page/not-found-page';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport PrivateRoute from '../private-route/private-route';\n\nimport {AppRoute, AuthorizationStatus} from '../../const';\nimport {getIsDataLoaded} from '../../store/data/selectors';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\nfunction App() {\n  const isDataLoaded = useSelector(getIsDataLoaded);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  const isCheckedAuth = (auth) => auth === AuthorizationStatus.UNKNOWN;\n\n  if (!isDataLoaded || isCheckedAuth(authorizationStatus)) {\n    return (\n      <LoadingScreen />\n    );\n  }\n\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route exact path={AppRoute.MAIN}>\n          <MainPage/>\n        </Route>\n        <Route exact path={AppRoute.OFFER}>\n          <OfferPage />\n        </Route>\n        <PrivateRoute\n          exact\n          path={AppRoute.FAVORITES}\n          render={() => <FavoritesPage />}\n        >\n        </PrivateRoute>\n        <Route exact path={AppRoute.LOGIN}>\n          <LoginPage />\n        </Route>\n        <Route>\n          <NotFoundPage />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import axios from 'axios';\n\nconst BACKEND_URL = 'https://7.react.pages.academy/six-cities';\nconst REQUEST_TIMEOUT = 5000;\n\nconst HttpCode = {\n  UNAUTHORIZED: 401,\n};\n\nconst token = localStorage.getItem('token') ?? '';\n\nexport const createAPI = (onUnauthorized) => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n    headers: {\n      'x-token': token,\n    },\n  });\n\n  const onSuccess = (response) => response;\n\n  const onFail = (err) => {\n    const {response} = err;\n\n    if (response.status === HttpCode.UNAUTHORIZED) {\n      onUnauthorized();\n    }\n\n    throw err;\n  };\n\n  api.interceptors.response.use(onSuccess, onFail);\n  api.interceptors.request.use((request) => {\n    request.headers = { 'x-token': localStorage.getItem('token') ?? '' };\n    return request;\n  });\n\n  return api;\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {configureStore} from '@reduxjs/toolkit';\nimport {Provider} from 'react-redux';\n\nimport App from './components/app/app';\n\nimport rootReducer from './store/root-reducer';\nimport {fetchOffersList, fetchFavorites, checkAuth} from './store/api-actions';\nimport {createAPI} from './services/api';\nimport {requireAuthorization} from './store/action';\nimport {AuthorizationStatus} from './const';\n\nconst api = createAPI(\n  () => store.dispatch(requireAuthorization(AuthorizationStatus.NO_AUTH)),\n);\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: api,\n      },\n    }),\n});\n\nstore.dispatch(checkAuth());\nstore.dispatch(fetchOffersList());\nstore.dispatch(fetchFavorites());\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App/>,\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}